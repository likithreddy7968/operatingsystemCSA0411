EXPERIMENT 15

#include <stdio.h>

int main() {
    int disk[50], n, files, start, len;
    int i, j, flag;

    // Initialize all disk blocks as free (0)
    for (i = 0; i < 50; i++) {
        disk[i] = 0;
    }

    printf("Enter total number of disk blocks: ");
    scanf("%d", &n);

    printf("Enter number of files: ");
    scanf("%d", &files);

    for (i = 0; i < files; i++) {
        printf("\nEnter starting block and length of file %d: ", i + 1);
        scanf("%d %d", &start, &len);

        if (start < 0 || start + len > n) {
            printf("Invalid block range!\n");
            i--; 
            continue;
        }

        flag = 1;

        // Check if blocks are free
        for (j = start; j < start + len; j++) {
            if (disk[j] == 1) {
                flag = 0;
                break;
            }
        }

        // Allocate if free
        if (flag == 1) {
            for (j = start; j < start + len; j++) {
                disk[j] = 1;
            }
            printf("File %d allocated successfully.\n", i + 1);
        } else {
            printf("Cannot allocate File %d (Blocks not free).\n", i + 1);
        }
    }

    // Output allocation table
    printf("\nDisk Allocation Table:\n");
    for (i = 0; i < n; i++) {
        printf("Block %d --> %s\n", i, disk[i] ? "Allocated" : "Free");
    }

    return 0;
}

INPUT 

Enter total number of disk blocks: 10
Enter number of files: 2

Enter starting block and length of file 1: 2 4
File 1 allocated successfully.

Enter starting block and length of file 2: 5 3
Cannot allocate File 2 (Blocks not free).

OUTPUT

Disk Allocation Table:
Block 0 --> Free
Block 1 --> Free
Block 2 --> Allocated
Block 3 --> Allocated
Block 4 --> Allocated
Block 5 --> Allocated
Block 6 --> Free
Block 7 --> Free
Block 8 --> Free
Block 9 --> Free

